%%{init: {"theme": "redux-dark-color"}}%%
sequenceDiagram
actor U as Utilisateur
participant F as Frontend

U ->> F: Créer un nouveau voyage
activate F
create participant B as Backend
F ->> B: Appel /travels/create
activate B
create participant D as Doctrine
B ->> D: Vérifier données
activate D
alt données valides
    D -->>- B: Données valides
    B ->> B: Créer voyage
    B ->>+ D: Enregistrer voyage
    D -->>- B: Voyage enregistré
    B ->> B: Envoyer mails de confirmation
    B -->> F: Voyage créé
    F -->> U: Afficher confirmation
activate D
else données invalides
    deactivate D
    destroy D
    D -->> B: Données invalides
    deactivate B
    destroy B
    B -->> F: Erreur
    F -->> U: Afficher message d'erreur
    deactivate F
end
